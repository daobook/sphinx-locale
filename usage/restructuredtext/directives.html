
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>指令 &#8212; Sphinx documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx13.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="canonical" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx documentation 中搜索"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.svg"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="字段列表" href="field-lists.html" />
    <link rel="prev" title="角色" href="roles.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../../index.html">Home</a></li>
    <li><a href="../installation.html">Get it</a></li>
    <li><a href="../../contents.html">Docs</a></li>
    <li><a href="../../development/index.html">Extend</a></li>
  </ul>
  <div>
    <a href="../../index.html">
      <img src="../../_static/sphinxheader.png" alt="SPHINX" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="field-lists.html" title="字段列表"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="roles.html" title="角色"
             accesskey="P">上一页</a> |</li>
        <li><a href="../../index.html">Sphinx home</a>&#160;|</li>
        <li><a href="../../contents.html">Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >使用 Sphinx</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">reStructuredText</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">指令</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">指令</a><ul>
<li><a class="reference internal" href="#table-of-contents">目录</a><ul>
<li><a class="reference internal" href="#special-names">特别的名字</a></li>
</ul>
</li>
<li><a class="reference internal" href="#paragraph-level-markup">段落级标记</a></li>
<li><a class="reference internal" href="#showing-code-examples">显示代码示例</a></li>
<li><a class="reference internal" href="#glossary">术语</a></li>
<li><a class="reference internal" href="#meta-information-markup">元信息标记</a></li>
<li><a class="reference internal" href="#index-generating-markup">索引生成标记</a></li>
<li><a class="reference internal" href="#including-content-based-on-tags">包含基于标记的内容</a></li>
<li><a class="reference internal" href="#tables">表格</a></li>
<li><a class="reference internal" href="#math">Math</a></li>
<li><a class="reference internal" href="#grammar-production-displays">Grammar production displays</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="roles.html"
                        title="上一章">角色</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="field-lists.html"
                        title="下一章">字段列表</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/usage/restructuredtext/directives.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="directives">
<h1>指令<a class="headerlink" href="#directives" title="永久链接至标题">¶</a></h1>
<p><a class="reference internal" href="basics.html#rst-directives"><span class="std std-ref">正如之前讨论的</span></a>，指令是一个通用的显式标记块。虽然 Docutils 提供了一些指令，但 Sphinx 提供了更多的指令，并使用指令作为主要的插件机制之一。</p>
<p>请参阅 <a class="reference internal" href="domains.html"><span class="doc">域</span></a> 了解域添加的角色。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>有关 Docutils 提供的指令的概述，请参阅 <a class="reference internal" href="basics.html#rst-directives"><span class="std std-ref">reStructuredText 入门</span></a>。</p>
</div>
<section id="table-of-contents">
<span id="toctree-directive"></span><h2>目录<a class="headerlink" href="#table-of-contents" title="永久链接至标题">¶</a></h2>
<p id="index-0">由于 reST 没有设施将几个文件相互连接，或将文件分割成多个输出文件，Sphinx 使用一个自定义指令来添加文件所组成的单个文件之间的关系，以及目录。<code class="docutils literal notranslate"><span class="pre">toctree</span></code> 指令是核心元素。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>可以使用 <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#include">include</a> 指令将一个文件简单地”包含”在另一个文件中。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>要为当前文件（.rst文件）创建目录，请使用标准的 reST <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#table-of-contents">contents 指令</a>。</p>
</div>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-toctree">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">toctree::</span></span><a class="headerlink" href="#directive-toctree" title="永久链接至目标">¶</a></dt>
<dd><p>这条指令在当前位置插入一个 “TOC 树”，使用指令 body 中给出的各个文件的 TOC（包括 “子 TOC 树”）。相对文档名称（不以斜杠开头）与指令所在的文档相关，绝对名称相对于源目录。可以给出数字 <code class="docutils literal notranslate"><span class="pre">maxdepth</span></code> 选项以指示树的深度；默认情况下，包括所有级别。<a class="footnote-reference brackets" href="#id6" id="id1">1</a></p>
<p>“TOC 树” 的表示方法在每种输出格式中都有变化。输出多个文件（如 HTML）的构建器将其视为超链接的集合。另一方面，输出单个文件（如 LaTeX、man page 等）的构建器将其替换为 TOC 树上的文件内容。</p>
<p>考虑这个例子（取自 Python docs 的库引用索引）</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:maxdepth:</span> 2

   intro
   strings
   datatypes
   numeric
   (many more documents listed here)
</pre></div>
</div>
<p>这完成了两件事：</p>
<ul class="simple">
<li><p>插入所有这些文档的目录，最大深度为2，表示一个嵌套标题。这些文件中的 <code class="docutils literal notranslate"><span class="pre">toctree</span></code> 指令也被考虑在内。</p></li>
<li><p>Sphinx 知道文档 <code class="docutils literal notranslate"><span class="pre">intro</span></code>，<code class="docutils literal notranslate"><span class="pre">strings</span></code> 等的相对顺序，并且它知道它们是所显示文档的子项，即库索引。根据这些信息，它会生成 “next chapter”，“previous chapter” 和 “parent chapter” 链接。</p></li>
</ul>
<p>栏目简介</p>
<p>第一个 <a class="reference internal" href="#directive-toctree" title="toctree directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">toctree</span></code></a> 中的文档标题将自动从引用文档的标题中读取。如果这不是您想要的，您可以使用与 reST 超链接类似的语法指定显式标题和目标（和 Sphinx 的 <a class="reference internal" href="roles.html#xref-syntax"><span class="std std-ref">交叉引用语法</span></a>）。这看起来像</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>

   intro
   All about strings &lt;strings&gt;
   datatypes
</pre></div>
</div>
<p>上面的第二行将链接到 <code class="docutils literal notranslate"><span class="pre">strings</span></code> 文档，但是将使用标题 “All about strings” 而不是 <code class="docutils literal notranslate"><span class="pre">strings</span></code>。</p>
<p>您还可以通过提供 HTTP URL 而不是文档名称来添加外部链接。</p>
<p><strong>章节编号</strong></p>
<p>如果你想在 HTML 输出中有节号，请给 <strong>顶层</strong> toctree 一个 <code class="docutils literal notranslate"><span class="pre">numbered</span></code> 选项。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:numbered:</span>

   foo
   bar
</pre></div>
</div>
<p>编号然后从 <code class="docutils literal notranslate"><span class="pre">foo</span></code> 的标题开始。子 toctrees 是自动编号的（不要给那些 <code class="docutils literal notranslate"><span class="pre">numbered</span></code> 标志）。</p>
<p>通过将深度作为 <code class="docutils literal notranslate"><span class="pre">numbered</span></code> 的数字参数，也可以编号到特定深度。</p>
<p>其他选项</p>
<p>你可以使用 <code class="docutils literal notranslate"><span class="pre">caption</span></code> 选项提供一个 toctree 标题，你可以使用 <code class="docutils literal notranslate"><span class="pre">name</span></code> 选项来提供可以通过使用引用的隐式目标名 <a class="reference internal" href="roles.html#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a></p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:caption:</span> Table of Contents
   <span class="nc">:name:</span> mastertoc

   foo
</pre></div>
</div>
<p>如果只想显示树中文档的标题，而不是同一级别的其他标题，则可以使用 <code class="docutils literal notranslate"><span class="pre">titlesonly</span></code> 选项</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:titlesonly:</span>

   foo
   bar
</pre></div>
</div>
<p>你可以在 toctree 指令中使用 “globbing”，给出 <code class="docutils literal notranslate"><span class="pre">glob</span></code> 标志选项。然后将所有条目与可用文档列表进行匹配，并按字母顺序将匹配项插入到列表中。例:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:glob:</span>

   intro*
   recipe/*
   *
</pre></div>
</div>
<p>这首先包括所有名称以 <code class="docutils literal notranslate"><span class="pre">intro</span></code> 开头的文件，然后是 <code class="docutils literal notranslate"><span class="pre">recipe</span></code> 文件夹中的所有文件，然后是所有剩余的文件（当然包含该指令的文件除外）。<a class="footnote-reference brackets" href="#id7" id="id2">2</a></p>
<p>特殊条目名称 <code class="docutils literal notranslate"><span class="pre">self</span></code> 代表包含toctree指令的文档。如果要从 toctree 生成”站点地图”，这非常有用。</p>
<p>您可以使用 <code class="docutils literal notranslate"><span class="pre">reversed</span></code> 标志选项来反转列表中条目的顺序。当使用 <code class="docutils literal notranslate"><span class="pre">glob</span></code> 标志选项来反转文件的顺序时，这非常有用。例</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:glob:</span>
   <span class="nc">:reversed:</span>

   recipe/*
</pre></div>
</div>
<p>你也可以给指令一个 <code class="docutils literal notranslate"><span class="pre">hidden</span></code> 选项，比如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:hidden:</span>

   doc_1
   doc_2
</pre></div>
</div>
<p>这仍将通知 Sphinx 文档层次结构，但不会在指令的位置插入文档中的链接——如果您打算自己，以不同的样式或 HTML 侧边栏插入这些链接，这是有意义的。</p>
<p>如果您只想拥有一个顶级 toctree 并隐藏所有其他较低级别的 toctree，则可以将 <code class="docutils literal notranslate"><span class="pre">includehidden</span></code> 选项添加到顶级 <code class="docutils literal notranslate"><span class="pre">toctree</span></code> 条目</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:includehidden:</span>

   doc_1
   doc_2
</pre></div>
</div>
<p>然后可以通过 <code class="docutils literal notranslate"><span class="pre">hidden</span></code> 选项消除所有其他 toctree 条目。</p>
<p>最后，<a class="reference internal" href="../../glossary.html#term-source-directory"><span class="xref std std-term">源目录</span></a> （或子目录）中的所有文档必须出现在某些 <code class="docutils literal notranslate"><span class="pre">toctree</span></code> 指令中；如果 Sphinx 找到未包含的文件，它将发出警告，因为这意味着无法通过标准导航访问此文件。</p>
<p>使用 <a class="reference internal" href="../configuration.html#confval-exclude_patterns"><code class="xref std std-confval docutils literal notranslate"><span class="pre">exclude_patterns</span></code></a> 可以完全排除文档或目录。使用 <a class="reference internal" href="field-lists.html#metadata"><span class="std std-ref">“orphan” 元数据</span></a> 来构建文档，但通知 Sphinx 它是无法通过 toctree 访问的。</p>
<p>“根文件” （由 <a class="reference internal" href="../configuration.html#confval-root_doc"><code class="xref std std-confval docutils literal notranslate"><span class="pre">root_doc</span></code></a> 选择）是 TOC 树层次结构的 “root”。如果你没有给出 <code class="docutils literal notranslate"><span class="pre">maxdepth</span></code> 选项，它可以用作文档的主页面，也可以用作 “完整的目录”。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 0.3 版更改: </span>添加了 “globbing” 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 0.6 版更改: </span>添加了 “numbered” 和 “hidden” 选项以及外部链接和对 “self” 引用的支持。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.0 版更改: </span>Added “titlesonly” option.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.1 版更改: </span>在 “numbered” 中添加了数字参数。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.2 版更改: </span>添加了 “includehidden” 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.3 版更改: </span>添加了 “caption” 和 “name” 选项。</p>
</div>
</dd></dl>

<section id="special-names">
<h3>特别的名字<a class="headerlink" href="#special-names" title="永久链接至标题">¶</a></h3>
<p>Sphinx 保留一些文件名供自己使用；您不应该尝试使用这些名称创建文档 - 这将导致问题。</p>
<p>特殊文档名称（以及为它们生成的页面）是：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">genindex</span></code>, <code class="docutils literal notranslate"><span class="pre">modindex</span></code>, <code class="docutils literal notranslate"><span class="pre">search</span></code></p>
<p>它们分别用于通用索引，Python 模块索引和搜索页面。</p>
<p>通用索引用模块中的项填充，所有索引生成 <a class="reference internal" href="domains.html#basic-domain-markup"><span class="std std-ref">object descriptions</span></a>，以及来自 <a class="reference internal" href="#directive-index" title="index directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">index</span></code></a> 指令。</p>
<p>Python 模块索引包含一个条目 <a class="reference internal" href="domains.html#directive-py-module" title="py:module directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">py:module</span></code></a> 指令。</p>
<p>搜索页面包含一个表单，该表单使用生成的 JSON 搜索索引和 JavaScript 对搜索词的生成文档进行全文搜索；它应该适用于支持现代 JavaScript 的每个主流浏览器。</p>
</li>
<li><p>以 <code class="docutils literal notranslate"><span class="pre">_</span></code> 开头的每个名字</p>
<p>虽然 Sphinx 目前只使用了很少这样的名称，但您不应该创建包含此类名称的文档或包含文档的目录。（使用 <code class="docutils literal notranslate"><span class="pre">_</span></code> 作为自定义模板目录的前缀是可以的。）</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>小心文件名中的异常字符。某些格式可能会以意外的方式解释这些字符：</p>
<ul class="simple">
<li><p>对于基于 HTML 的格式，不要使用冒号 <code class="docutils literal notranslate"><span class="pre">:</span></code>。与其他部分的链接可能无效。</p></li>
<li><p>不要使用加号 <code class="docutils literal notranslate"><span class="pre">+</span></code> 作为 ePub 格式。可能找不到某些资源。</p></li>
</ul>
</div>
</section>
</section>
<section id="paragraph-level-markup">
<h2>段落级标记<a class="headerlink" href="#paragraph-level-markup" title="永久链接至标题">¶</a></h2>
<p id="index-1">这些指令创建短段落，可以在内部信息单元和普通文本中使用。</p>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-note">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">note::</span></span><a class="headerlink" href="#directive-note" title="永久链接至目标">¶</a></dt>
<dd><p>关于 API 的一个特别重要的信息，用户在使用该注释所涉及的任何 API 时应该注意这些信息。指令的内容应以完整的句子写成，并包括所有适当的标点符号。</p>
<p>例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">note</span><span class="p">::</span>

   This function is not suitable for sending spam e-mails.
</pre></div>
</div>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-warning">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">warning::</span></span><a class="headerlink" href="#directive-warning" title="永久链接至目标">¶</a></dt>
<dd><p>关于 API 的一些重要信息，用户在使用警告所涉及的任何API时都应该非常清楚。指令的内容应以完整的句子写成，并包括所有适当的标点符号。这不同于 <a class="reference internal" href="#directive-note" title="note directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">note</span></code></a>，因为建议使用 <a class="reference internal" href="#directive-note" title="note directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">note</span></code></a> 以获取有关安全性的信息。</p>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-versionadded">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">versionadded::</span></span><span class="sig-prename descclassname"> <span class="pre">version</span></span><a class="headerlink" href="#directive-versionadded" title="永久链接至目标">¶</a></dt>
<dd><p>该指令记录了将所描述的功能添加到库或 C API 的项目版本。当这适用于整个模块时，应该在任何散文之前将其放置在模块部分的顶部。</p>
<p>第一个参数必须给定，是有关的版本；你可以添加第二个参数，包括对变更的简要解释。</p>
<p>例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">versionadded</span><span class="p">::</span> 2.5
   The <span class="ge">*spam*</span> parameter.
</pre></div>
</div>
<p>请注意，指令头和说明之间必须没有空行；这是为了使这些块在标记中在视觉上连续。</p>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-versionchanged">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">versionchanged::</span></span><span class="sig-prename descclassname"> <span class="pre">version</span></span><a class="headerlink" href="#directive-versionchanged" title="永久链接至目标">¶</a></dt>
<dd><p>类似于 <a class="reference internal" href="#directive-versionadded" title="versionadded directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">versionadded</span></code></a>，但以某种方式描述命名特征中的更改时间和内容（新参数，更改的副作用等）。</p>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-deprecated">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">deprecated::</span></span><span class="sig-prename descclassname"> <span class="pre">version</span></span><a class="headerlink" href="#directive-deprecated" title="永久链接至目标">¶</a></dt>
<dd><p>类似于 <a class="reference internal" href="#directive-versionchanged" title="versionchanged directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">versionchanged</span></code></a>，但描述了该功能何时被弃用。还可以给出解释，例如通知读者应该使用什么。例</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">deprecated</span><span class="p">::</span> 3.1
   Use <span class="na">:func:</span><span class="nv">`spam`</span> instead.
</pre></div>
</div>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-seealso">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">seealso::</span></span><a class="headerlink" href="#directive-seealso" title="永久链接至目标">¶</a></dt>
<dd><p>许多部分包括对模块文档或外部文档的引用列表。这些列表使用 <a class="reference internal" href="#directive-seealso" title="seealso directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">seealso</span></code></a> 指令创建。</p>
<p><a class="reference internal" href="#directive-seealso" title="seealso directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">seealso</span></code></a> 指令通常放在任何子部分之前的部分中。对于 HTML 输出，它显示为从文本的主流中框出来。</p>
<p>以下内容 <a class="reference internal" href="#directive-seealso" title="seealso directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">seealso</span></code></a> 指令应该是 reST 定义列表。例</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">seealso</span><span class="p">::</span>

   Module <span class="na">:py:mod:</span><span class="nv">`zipfile`</span>
      Documentation of the <span class="na">:py:mod:</span><span class="nv">`zipfile`</span> standard module.

   <span class="s">`GNU tar manual, Basic Tar Format </span><span class="si">&lt;http://link&gt;</span><span class="s">`_</span>
      Documentation for tar archive files, including GNU tar extensions.
</pre></div>
</div>
<p>还有一个 “短式” 允许看起来像这样</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">seealso</span><span class="p">::</span> modules <span class="na">:py:mod:</span><span class="nv">`zipfile`</span>, <span class="na">:py:mod:</span><span class="nv">`tarfile`</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">0.5 新版功能: </span>The short form.</p>
</div>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-rubric">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">rubric::</span></span><span class="sig-prename descclassname"> <span class="pre">title</span></span><a class="headerlink" href="#directive-rubric" title="永久链接至目标">¶</a></dt>
<dd><p>该指令创建一个段落标题，不用于创建目录节点。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果标题的 <em>title</em> 是 “脚注”（或所选语言的等价物），则 LaTeX 编写器会忽略此标题，因为假定它仅包含脚注定义，因此会创建一个空标题。</p>
</div>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-centered">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">centered::</span></span><a class="headerlink" href="#directive-centered" title="永久链接至目标">¶</a></dt>
<dd><p>该指令创建一个居中的粗体文本行。使用方法如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">centered</span><span class="p">::</span> LICENSE AGREEMENT
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">1.1 版后已移除: </span>此演示文稿指令是旧版本的遗留代码。使用 <code class="xref rst rst-dir docutils literal notranslate"><span class="pre">rst-class</span></code> 指令代替并添加适当的样式。</p>
</div>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-hlist">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">hlist::</span></span><a class="headerlink" href="#directive-hlist" title="永久链接至目标">¶</a></dt>
<dd><p>该指令必须包含项目符号列表。它会通过水平分布多个项目或减少项目间距来将其转换为更紧凑的列表，具体取决于构建器。</p>
<p>对于支持水平分布的构建器，有一个 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 选项，用于指定列数；它默认为 2。示例</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">hlist</span><span class="p">::</span>
   <span class="nc">:columns:</span> 3

   <span class="m">*</span> A list of
   <span class="m">*</span> short items
   <span class="m">*</span> that should be
   <span class="m">*</span> displayed
   <span class="m">*</span> horizontally
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">0.6 新版功能.</span></p>
</div>
</dd></dl>

</section>
<section id="showing-code-examples">
<span id="code-examples"></span><h2>显示代码示例<a class="headerlink" href="#showing-code-examples" title="永久链接至标题">¶</a></h2>
<p id="index-2">有多种方法可以在 Sphinx 中显示语法高亮的文字代码块：</p>
<ul class="simple">
<li><p>使用 <a class="reference internal" href="basics.html#rst-doctest-blocks"><span class="std std-ref">reST doctest 块</span></a></p></li>
<li><p>使用 <a class="reference internal" href="basics.html#rst-literal-blocks"><span class="std std-ref">reST literal blocks</span></a>，可选择与 <a class="reference internal" href="#directive-highlight" title="highlight directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">highlight</span></code></a> 指令结合使用；</p></li>
<li><p>使用 <a class="reference internal" href="#directive-code-block" title="code-block directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">code-block</span></code></a> 指令</p></li>
<li><p>并使用 <a class="reference internal" href="#directive-literalinclude" title="literalinclude directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">literalinclude</span></code></a> 指令。</p></li>
</ul>
<p>Doctest 块只能用于显示交互式 Python 会话，而其余三个可用于其他语言。在这三个文件中，当整个文档或至少大部分文档使用具有相同语法的代码块并且应该以相同的方式设置样式时，文字块是有用的。另一方面，当你想要对每个块的样式进行更精细的控制，或者当你有一个包含使用多种不同语法的代码块的文档时，第一个 <a class="reference internal" href="#directive-code-block" title="code-block directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">code-block</span></code></a> 指令更有意义。最后，<a class="reference internal" href="#directive-literalinclude" title="literalinclude directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">literalinclude</span></code></a> 指令对于在文档中包含整个代码文件非常有用。</p>
<p>在所有情况下，语法高亮由 <a class="reference external" href="https://pygments.org">Pygments</a> 提供。使用文字块时，使用源文件中的任何 [<a class="reference internal" href="#directive-highlight" title="highlight directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">highlight</span></code></a> 指令进行配置。当遇到 <code class="docutils literal notranslate"><span class="pre">highlight</span></code> 指令时，它会被使用，直到遇到下一个 <code class="docutils literal notranslate"><span class="pre">highlight</span></code> 指令。如果文件中没有 <code class="docutils literal notranslate"><span class="pre">highlight</span></code> 指令，则使用全局突出显示语言。这默认为 <code class="docutils literal notranslate"><span class="pre">python</span></code>，但可以使用 <a class="reference internal" href="../configuration.html#confval-highlight_language"><code class="xref std std-confval docutils literal notranslate"><span class="pre">highlight_language</span></code></a> 配置值进行配置。支持以下值：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code> （没有突出显示）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code> （类似于 <code class="docutils literal notranslate"><span class="pre">python3</span></code> 但是回退到 <code class="docutils literal notranslate"><span class="pre">none</span></code> 没有警告突出显示失败；默认情况下 <a class="reference internal" href="../configuration.html#confval-highlight_language"><code class="xref std std-confval docutils literal notranslate"><span class="pre">highlight_language</span></code></a> 未设置）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guess</span></code> （让 Pygments 根据内容猜测词法分析器，只适用于某些识别良好的语言)）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rest</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></li>
<li><p>… 以及其他 <a class="reference external" href="https://pygments.org/docs/lexers">Pygments 支持的 lexer 别名</a></p></li>
</ul>
<p>如果使用所选语言突出显示失败（即 Pygments 发出 “错误” 标记），则不会以任何方式突出显示该块。</p>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>支持的词法分类别名列表与 Pygment 版本相关联。如果要确保一致突出显示，则应修复 Pygments 的版本。</p>
</div>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-highlight">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">highlight::</span></span><span class="sig-prename descclassname"> <span class="pre">language</span></span><a class="headerlink" href="#directive-highlight" title="永久链接至目标">¶</a></dt>
<dd><p>例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">highlight</span><span class="p">::</span> c
</pre></div>
</div>
<p>这个语言会一直使用到遇到下一个 <code class="docutils literal notranslate"><span class="pre">highlight</span></code> 指令。如前所述，<em>language</em>  可以是 Pygments 支持的任何词法别名。</p>
<p class="rubric">选项</p>
<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-highlight-linenothreshold">
<span id="directive:option-highlight-linenothreshold"></span><span class="sig-name descname"><span class="pre">:linenothreshold:</span></span><em class="property"> <span class="pre">threshold</span></em><em class="property"> <span class="pre">(number</span> <span class="pre">(optional))</span></em><a class="headerlink" href="#directive-option-highlight-linenothreshold" title="永久链接至目标">¶</a></dt>
<dd><p>启用为代码块生成行号。</p>
<p>这个选项需要一个可选的数字作为阈值参数。如果给出任何阈值，指令将只为超过 N 行的代码块生成行号。如果不给定，将为所有的代码块产生行号。</p>
<p>例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">highlight</span><span class="p">::</span> python
   <span class="nc">:linenothreshold:</span> 5
</pre></div>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-highlight-force">
<span id="directive:option-highlight-force"></span><span class="sig-name descname"><span class="pre">:force:</span></span><em class="property"> <span class="pre">(no</span> <span class="pre">value)</span></em><a class="headerlink" href="#directive-option-highlight-force" title="永久链接至目标">¶</a></dt>
<dd><p>如果给定，高亮显示的小错误会被忽略。</p>
<div class="versionadded">
<p><span class="versionmodified added">2.1 新版功能.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-code-block">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">code-block::</span></span><span class="sig-prename descclassname"> <span class="pre">[language]</span></span><a class="headerlink" href="#directive-code-block" title="永久链接至目标">¶</a></dt>
<dd><p>例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> ruby

   Some Ruby code.
</pre></div>
</div>
<p>该指令的别名 <code class="xref rst rst-dir docutils literal notranslate"><span class="pre">sourcecode</span></code> 也可以。该指令将语言名称作为参数。它可以是 <a class="reference external" href="https://pygments.org/docs/lexers/">Pygments 支持的任何词法分析别名</a> 。如果没有给出，将使用  <a class="reference internal" href="#directive-highlight" title="highlight directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">highlight</span></code></a> 指令的设置。如果没有设置，将使用 <a class="reference internal" href="../configuration.html#confval-highlight_language"><code class="xref std std-confval docutils literal notranslate"><span class="pre">highlight_language</span></code></a>。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.0 版更改: </span><code class="docutils literal notranslate"><span class="pre">language</span></code> 参数变成可选。</p>
</div>
<p class="rubric">选项</p>
<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-linenos">
<span id="directive:option-code-block-linenos"></span><span class="sig-name descname"><span class="pre">:linenos:</span></span><em class="property"> <span class="pre">(no</span> <span class="pre">value)</span></em><a class="headerlink" href="#directive-option-code-block-linenos" title="永久链接至目标">¶</a></dt>
<dd><p>启用为代码块生成行号</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> ruby
   <span class="nc">:linenos:</span>

   Some more Ruby code.
</pre></div>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-lineno-start">
<span id="directive:option-code-block-lineno-start"></span><span class="sig-name descname"><span class="pre">:lineno-start:</span></span><em class="property"> <span class="pre">number</span></em><em class="property"> <span class="pre">(number)</span></em><a class="headerlink" href="#directive-option-code-block-lineno-start" title="永久链接至目标">¶</a></dt>
<dd><p>设置代码块的第一行号。如果存在，<code class="docutils literal notranslate"><span class="pre">linenos</span></code> 选项也会自动激活</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> ruby
   <span class="nc">:lineno-start:</span> 10

   Some more Ruby code, with line numbering starting at 10.
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-emphasize-lines">
<span id="directive:option-code-block-emphasize-lines"></span><span class="sig-name descname"><span class="pre">:emphasize-lines:</span></span><em class="property"> <span class="pre">line</span> <span class="pre">numbers</span></em><em class="property"> <span class="pre">(comma</span> <span class="pre">separated</span> <span class="pre">numbers)</span></em><a class="headerlink" href="#directive-option-code-block-emphasize-lines" title="永久链接至目标">¶</a></dt>
<dd><p>强调代码块中的特定行</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> python
   <span class="nc">:emphasize-lines:</span> 3,5

   def some_function():
       interesting = False
       print &#39;This line is highlighted.&#39;
       print &#39;This one is not...&#39;
       print &#39;...but this one is.&#39;
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.1 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.6.6 版更改: </span>LaTeX 支持 <code class="docutils literal notranslate"><span class="pre">emphasize-lines</span></code> 选项。</p>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-caption">
<span id="directive:option-code-block-caption"></span><span class="sig-name descname"><span class="pre">:caption:</span></span><em class="property"> <span class="pre">caption</span> <span class="pre">of</span> <span class="pre">code</span> <span class="pre">block</span></em><em class="property"> <span class="pre">(text)</span></em><a class="headerlink" href="#directive-option-code-block-caption" title="永久链接至目标">¶</a></dt>
<dd><p>为代码块设置一个标题。</p>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-name">
<span id="directive:option-code-block-name"></span><span class="sig-name descname"><span class="pre">:name:</span></span><em class="property"> <span class="pre">a</span> <span class="pre">label</span> <span class="pre">for</span> <span class="pre">hyperlink</span></em><em class="property"> <span class="pre">(text)</span></em><a class="headerlink" href="#directive-option-code-block-name" title="永久链接至目标">¶</a></dt>
<dd><p>定义隐含的目标名称，可以通过使用 <a class="reference internal" href="roles.html#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a> 进行引用。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> python
   <span class="nc">:caption:</span> this.py
   <span class="nc">:name:</span> this-py

   print &#39;Explicit is better than implicit.&#39;
</pre></div>
</div>
<p>为了使用 <a class="reference internal" href="roles.html#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a> 或 <a class="reference internal" href="roles.html#role-numref" title="numref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">numref</span></code></a> 角色来交叉引用一个代码块，有必要同时定义 <strong>name</strong> 和 <strong>caption</strong>。然后 <strong>name</strong> 的参数可以交给 <a class="reference internal" href="roles.html#role-numref" title="numref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">numref</span></code></a> 来生成交叉引用。例如 ::”</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>See <span class="na">:numref:</span><span class="nv">`this-py`</span> for an example.
</pre></div>
</div>
<p>当使用 <a class="reference internal" href="roles.html#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a> 时，有可能生成一个只定义了 <strong>name</strong> 的交叉引用，只要给出一个明确的标题。例如 ::”</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>See <span class="na">:ref:</span><span class="nv">`this code snippet &lt;this-py&gt;`</span> for an example.
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-dedent">
<span id="directive:option-code-block-dedent"></span><span class="sig-name descname"><span class="pre">:dedent:</span></span><em class="property"> <span class="pre">number</span></em><em class="property"> <span class="pre">(number</span> <span class="pre">or</span> <span class="pre">no</span> <span class="pre">value)</span></em><a class="headerlink" href="#directive-option-code-block-dedent" title="永久链接至目标">¶</a></dt>
<dd><p>从代码块中剥离缩进字符。当给出数字时，前面的 N 个字符被删除。当没有给出参数时，通过 <a class="reference external" href="https://docs.python.org/3/library/textwrap.html#textwrap.dedent" title="(在 Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code></a> 删除前面的空格。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> ruby
   <span class="nc">:dedent:</span> 4

       some ruby code
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>支持自动缩进。</p>
</div>
</dd></dl>

<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-code-block-force">
<span id="directive:option-code-block-force"></span><span class="sig-name descname"><span class="pre">:force:</span></span><em class="property"> <span class="pre">(no</span> <span class="pre">value)</span></em><a class="headerlink" href="#directive-option-code-block-force" title="永久链接至目标">¶</a></dt>
<dd><p>如果给定，高亮显示的小错误会被忽略。</p>
<div class="versionadded">
<p><span class="versionmodified added">2.1 新版功能.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-literalinclude">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">literalinclude::</span></span><span class="sig-prename descclassname"> <span class="pre">filename</span></span><a class="headerlink" href="#directive-literalinclude" title="永久链接至目标">¶</a></dt>
<dd><p>较长的逐字文本显示可以通过将示例文本存储在一个只包含纯文本的外部文件中来包含。该文件可以使用 <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code> 指令来包含。<a class="footnote-reference brackets" href="#id8" id="id4">3</a> 例如，要包括 Python 源文件 <code class="file docutils literal notranslate"><span class="pre">example.py</span></code>，使用</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> example.py
</pre></div>
</div>
<p>文件名通常是相对于当前文件的路径。然而，如果它是绝对的（以 <code class="docutils literal notranslate"><span class="pre">/</span></code> 开头），它是相对于最高源目录的。</p>
<p>其他选项</p>
<p>与 <a class="reference internal" href="#directive-code-block" title="code-block directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">code-block</span></code></a> 一样，该指令支持 <code class="docutils literal notranslate"><span class="pre">linenos</span></code> 标志选项以切换到行号，<code class="docutils literal notranslate"><span class="pre">lineno-start</span></code> 选项以选择第一行号，<code class="docutils literal notranslate"><span class="pre">emphasize-lines</span></code> 选项以强调特定行，<code class="docutils literal notranslate"><span class="pre">name</span></code> 选项以提供隐含的目标名称，<code class="docutils literal notranslate"><span class="pre">dedent</span></code> 选项以剥离代码块的缩进字符，以及 <code class="docutils literal notranslate"><span class="pre">language</span></code> 选项以选择不同于当前文件的标准语言。此外，它还支持 <code class="docutils literal notranslate"><span class="pre">caption</span></code> 选项；但是，可以不提供参数，使用文件名作为标题。带有选项的例子</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> example.rb
   <span class="nc">:language:</span> ruby
   <span class="nc">:emphasize-lines:</span> 12,15-18
   <span class="nc">:linenos:</span>
</pre></div>
</div>
<p>如果你给出一个 <code class="docutils literal notranslate"><span class="pre">tab-width</span></code> 选项，并给出所需的标记宽度，那么输入中的标记将被展开。</p>
<p>包含文件被假定为以 <a class="reference internal" href="../configuration.html#confval-source_encoding"><code class="xref std std-confval docutils literal notranslate"><span class="pre">source_encoding</span></code></a> 的方式编码。如果文件有不同的编码，你可以用 <code class="docutils literal notranslate"><span class="pre">encoding</span></code> 选项来指定它</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> example.py
   <span class="nc">:encoding:</span> latin-1
</pre></div>
</div>
<p>该指令还支持只包括文件的一部分。如果它是一个 Python 模块，你可以使用 <code class="docutils literal notranslate"><span class="pre">pyobject</span></code> 选项选择要包括的类、函数或方法</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> example.py
   <span class="nc">:pyobject:</span> Timer.start
</pre></div>
</div>
<p>这将只包括文件中属于 <code class="docutils literal notranslate"><span class="pre">Timer</span></code> 类中 <code class="docutils literal notranslate"><span class="pre">start()</span></code> 方法的代码行。</p>
<p>另外，你可以通过给一个 <code class="docutils literal notranslate"><span class="pre">lines</span></code> 选项来准确指定要包括哪些行</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> example.py
   <span class="nc">:lines:</span> 1,3,5-10,20-
</pre></div>
</div>
<p>这包括第 1、3、5 至 10 行和第 20 至最后一行。</p>
<p>另一种控制文件的哪一部分被包含的方法是使用 <code class="docutils literal notranslate"><span class="pre">start-after</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end-before</span></code> 选项（或只使用其中一个）。如果 <code class="docutils literal notranslate"><span class="pre">start-after</span></code> 是一个字符串选项，只有包含该字符串的第一行之后的行被包括在内。如果 <code class="docutils literal notranslate"><span class="pre">end-before</span></code> 是一个字符串选项，则只包括包含该字符串的第一行之前的行。<code class="docutils literal notranslate"><span class="pre">start-at</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end-at</span></code> 选项的行为类似，但包含匹配的字符串的行被包括在内。</p>
<p><code class="docutils literal notranslate"><span class="pre">start-after</span></code>/<code class="docutils literal notranslate"><span class="pre">start-at</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end-before</span></code>/<code class="docutils literal notranslate"><span class="pre">end-at</span></code> 可以有同一个字符串。<code class="docutils literal notranslate"><span class="pre">start-after</span></code>/<code class="docutils literal notranslate"><span class="pre">start-at</span></code> 过滤包含选项字符串的行之前的行（<code class="docutils literal notranslate"><span class="pre">start-at</span></code> 将保留该行）。然后 <code class="docutils literal notranslate"><span class="pre">end-before</span></code>/<code class="docutils literal notranslate"><span class="pre">end-at</span></code> 过滤包含选项字符串的行之后的行（<code class="docutils literal notranslate"><span class="pre">end-at</span></code> 将保留该行，<code class="docutils literal notranslate"><span class="pre">end-before</span></code> 跳过第一行）”</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果你想只选择 ini 文件的 <code class="docutils literal notranslate"><span class="pre">[second-section]</span></code>，像下面这样，你可以使用 <code class="docutils literal notranslate"><span class="pre">:start-at:</span> <span class="pre">[second-section]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">:end-before:</span> <span class="pre">[third-section]</span></code> ：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[first-section]</span>

<span class="na">var_in_first</span><span class="o">=</span><span class="s">true</span>

<span class="k">[second-section]</span>

<span class="na">var_in_second</span><span class="o">=</span><span class="s">true</span>

<span class="k">[third-section]</span>

<span class="na">var_in_third</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>这些选项的有用情况是与标记注释一起工作。<code class="docutils literal notranslate"><span class="pre">:start-after:</span> <span class="pre">[initialized]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">:end-before:</span> <span class="pre">[initialized]</span></code> 选项在注释之间保留行数：</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># [initialize]</span>
    <span class="n">app</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s2">&quot;:8000&quot;</span><span class="p">)</span>
    <span class="c1"># [initialize]</span>
</pre></div>
</div>
</div>
<p>当以上述任何一种方式选择行时，<code class="docutils literal notranslate"><span class="pre">emphasize-lines</span></code> 中的行号是指这些被选中的行，从 <code class="docutils literal notranslate"><span class="pre">1</span></code> 开始连续计算。</p>
<p>当指定要显示文件的特定部分时，显示原始行号可能是有用的。这可以通过 <code class="docutils literal notranslate"><span class="pre">lineno-match</span></code> 选项来实现，但只有当选择由连续的行组成时才允许。</p>
<p>你可以分别使用 <code class="docutils literal notranslate"><span class="pre">prepend</span></code> 和 <code class="docutils literal notranslate"><span class="pre">append</span></code> 选项，在包含的代码中预置和/或附加一行。例如，这对突出显示不包括 <code class="docutils literal notranslate"><span class="pre">&lt;?php</span></code>/<code class="docutils literal notranslate"><span class="pre">?&gt;</span></code> 标记的 PHP 代码很有用。</p>
<p>如果你想显示代码的差异，你可以通过给一个 <code class="docutils literal notranslate"><span class="pre">diff</span></code> 选项来指定旧文件</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> example.py
   <span class="nc">:diff:</span> example.py.orig
</pre></div>
</div>
<p>这显示了 <code class="docutils literal notranslate"><span class="pre">example.py</span></code> 和 <code class="docutils literal notranslate"><span class="pre">example.py.orig</span></code> 之间的差异，统一的 diff 格式。</p>
<p><code class="docutils literal notranslate"><span class="pre">force</span></code> 选项可以忽略高亮显示的小错误。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 0.4.3 版更改: </span>添加了 <code class="docutils literal notranslate"><span class="pre">encoding</span></code> 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 0.6 版更改: </span>添加了 <code class="docutils literal notranslate"><span class="pre">pyobject</span></code>，<code class="docutils literal notranslate"><span class="pre">lines</span></code>，<code class="docutils literal notranslate"><span class="pre">start-after</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end-before</span></code> 选项，以及对绝对文件名的支持。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.0 版更改: </span>添加了 <code class="docutils literal notranslate"><span class="pre">prepend</span></code>，<code class="docutils literal notranslate"><span class="pre">append</span></code> 和 <code class="docutils literal notranslate"><span class="pre">tab-width</span></code> 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.3 版更改: </span>添加了 <code class="docutils literal notranslate"><span class="pre">diff</span></code>，<code class="docutils literal notranslate"><span class="pre">lineno-match</span></code>，<code class="docutils literal notranslate"><span class="pre">caption</span></code>，<code class="docutils literal notranslate"><span class="pre">name</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dedent</span></code> 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.5 版更改: </span>添加了 <code class="docutils literal notranslate"><span class="pre">start-at</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end-at</span></code> 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.6 版更改: </span>使用 <code class="docutils literal notranslate"><span class="pre">start-after</span></code> 和 <code class="docutils literal notranslate"><span class="pre">lines</span></code> 时，第一行按照 <code class="docutils literal notranslate"><span class="pre">start-after</span></code> 被认为是 <code class="docutils literal notranslate"><span class="pre">lines</span></code> 的行号 <code class="docutils literal notranslate"><span class="pre">1</span></code> 。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 2.1 版更改: </span>添加 <code class="docutils literal notranslate"><span class="pre">force</span></code> 选项。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 3.5 版更改: </span>支持自动缩进。</p>
</div>
</dd></dl>

</section>
<section id="glossary">
<span id="glossary-directive"></span><h2>术语<a class="headerlink" href="#glossary" title="永久链接至标题">¶</a></h2>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-glossary">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">glossary::</span></span><a class="headerlink" href="#directive-glossary" title="永久链接至目标">¶</a></dt>
<dd><p>该指令必须包含带有术语和定义的 reST 定义列表标记。然后，这些定义可以引用 <a class="reference internal" href="roles.html#role-term" title="term role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">term</span></code></a> 角色。例:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">glossary</span><span class="p">::</span>

   environment
      A structure where information about all documents under the root is
      saved, and used for cross-referencing.  The environment is pickled
      after the parsing stage, so that successive runs only need to read
      and parse new and changed documents.

   source directory
      The directory which, including its subdirectories, contains all
      source files for one Sphinx project.
</pre></div>
</div>
<p>与常规定义列表相比，每个条目允许 <em>multiple</em> 术语，并且允许使用内联标记。您可以链接到所有条款。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">glossary</span><span class="p">::</span>

   term 1
   term 2
      Definition of both terms.
</pre></div>
</div>
<p>（当词汇表被排序时，第一个术语决定了排序顺序。）</p>
<p>如果你想为一般的索引条目指定 “分组键”，你可以把一个 “key” 作为 “term : key”。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">glossary</span><span class="p">::</span>

   term 1 : A
   term 2 : B
      Definition of both terms.
</pre></div>
</div>
<p>注意 “key” 是用来分组键的，就像现在一样。“key”没有被规范化，键 “A” 和 “a” 成为不同的组。“key” 中的整个字符被用来代替第一个字符；它被用于 “合并字符序列” 和 “代理配对” 分组键。</p>
<p>在 i18n 的情况下，你可以指定 “localized term : key” 即使原文只有 “term” 部分。在这种情况下，翻译的 “localized term” 将被归入 “key” 组。</p>
<div class="versionadded">
<p><span class="versionmodified added">0.6 新版功能: </span>您现在可以为 glossary 指令提供一个 <code class="docutils literal notranslate"><span class="pre">:sorted:</span></code> 标志，该标志将按字母顺序自动对条目进行排序。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.1 版更改: </span>现在支持多个术语和内联标记。</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.4 版更改: </span>词汇表术语的索引键应视为 <em>实验性</em>。</p>
</div>
</dd></dl>

</section>
<section id="meta-information-markup">
<h2>元信息标记<a class="headerlink" href="#meta-information-markup" title="永久链接至标题">¶</a></h2>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-sectionauthor">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">sectionauthor::</span></span><span class="sig-prename descclassname"> <span class="pre">name</span> <span class="pre">&lt;email&gt;</span></span><a class="headerlink" href="#directive-sectionauthor" title="永久链接至目标">¶</a></dt>
<dd><p>标识当前部分的作者。该论点应包括作者的姓名，以便它可用于演示文稿和电子邮件地址。地址的域名部分应为小写。例</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">sectionauthor</span><span class="p">::</span> Guido van Rossum &lt;guido@python.org&gt;
</pre></div>
</div>
<p>默认情况下，此标记不会以任何方式反映在输出中(它有助于跟踪贡献)，但您可以将配置值 <a class="reference internal" href="../configuration.html#confval-show_authors"><code class="xref std std-confval docutils literal notranslate"><span class="pre">show_authors</span></code></a> 设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 以使它们生成一个段落输出。</p>
</dd></dl>

<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-codeauthor">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">codeauthor::</span></span><span class="sig-prename descclassname"> <span class="pre">name</span> <span class="pre">&lt;email&gt;</span></span><a class="headerlink" href="#directive-codeauthor" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#directive-codeauthor" title="codeauthor directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">codeauthor</span></code></a> 指令，可以多次出现，命名所描述代码的作者，就像 <a class="reference internal" href="#directive-sectionauthor" title="sectionauthor directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">sectionauthor</span></code></a> 命名一篇文档的作者。如果 <a class="reference internal" href="../configuration.html#confval-show_authors"><code class="xref std std-confval docutils literal notranslate"><span class="pre">show_authors</span></code></a> 配置值为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，它也只产生输出。</p>
</dd></dl>

</section>
<section id="index-generating-markup">
<h2>索引生成标记<a class="headerlink" href="#index-generating-markup" title="永久链接至标题">¶</a></h2>
<p>Sphinx 自动从所有对象描述（如函数，类或属性）创建索引条目,如 <a class="reference internal" href="domains.html"><span class="doc">域</span></a> 中所述。</p>
<p>但是，还有明确的标记可用，以使索引更加全面，并在文档中启用索引条目，其中信息不主要包含在信息单元中，例如语言参考。</p>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-index">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">index::</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;entries&gt;</span></span><a class="headerlink" href="#directive-index" title="永久链接至目标">¶</a></dt>
<dd><p>该指令包含一个或多个索引条目。每个条目由一个类型和一个值组成，用冒号分隔。</p>
<p>例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">index</span><span class="p">::</span>
   single: execution; context
   module: __main__
   module: sys
   triple: module; search; path

<span class="gh">The execution context</span>
<span class="gh">---------------------</span>

<span class="cp">...</span>
</pre></div>
</div>
<p>该指令包含五个条目，这些条目将转换为生成的索引中的条目，该条目链接到索引语句的确切位置（或者，如果是脱机介质，则是相应的页码）。</p>
<p>由于 index 指令在它们在源文件中的位置产生交叉引用的目标，所以把它们放在它们所指的东西之前是有意义的–例如标题，如上面的例子。</p>
<p>可能的条目类型是：</p>
<dl class="simple">
<dt>single</dt><dd><p>创建单个索引条目。可以通过用分号分隔子条目文本来创建子条目（下面也使用此符号来描述创建的条目）。</p>
</dd>
<dt>pair</dt><dd><p><code class="docutils literal notranslate"><span class="pre">pair:</span> <span class="pre">loop;</span> <span class="pre">statement</span></code> 是一个创建两个索引条目的快捷方式，即 <code class="docutils literal notranslate"><span class="pre">loop;</span> <span class="pre">statement</span></code> 和 <code class="docutils literal notranslate"><span class="pre">statement;</span> <span class="pre">loop</span></code>。</p>
</dd>
<dt>triple</dt><dd><p>同样，<code class="docutils literal notranslate"><span class="pre">triple:</span> <span class="pre">module;</span> <span class="pre">search;</span> <span class="pre">path</span></code> 是一个创建三个索引条目的快捷方式，它们是 <code class="docutils literal notranslate"><span class="pre">module;</span> <span class="pre">search</span> <span class="pre">path</span></code>，<code class="docutils literal notranslate"><span class="pre">search;</span> <span class="pre">path，module</span></code> 和 <code class="docutils literal notranslate"><span class="pre">path;</span> <span class="pre">module</span> <span class="pre">search</span></code>。</p>
</dd>
<dt>see</dt><dd><p><code class="docutils literal notranslate"><span class="pre">see:</span> <span class="pre">entry;</span> <span class="pre">other</span></code> 创建一个索引条目，从 <code class="docutils literal notranslate"><span class="pre">entry</span></code> 引用到 <code class="docutils literal notranslate"><span class="pre">other</span></code>。</p>
</dd>
<dt>seealso</dt><dd><p>就像 <code class="docutils literal notranslate"><span class="pre">see</span></code>，但是插入 “see also” 而不是 “see”。</p>
</dd>
<dt>module, keyword, operator, object, exception, statement, builtin</dt><dd><p>这些都创建了两个索引条目。例如，<code class="docutils literal notranslate"><span class="pre">module:hashlib</span></code> 创建条目 <code class="docutils literal notranslate"><span class="pre">module;</span> <span class="pre">hashlib</span></code> 和 <code class="docutils literal notranslate"><span class="pre">hashlib;</span> <span class="pre">module</span></code> 。（这些是特定于 Python 的，因此已弃用。）</p>
</dd>
</dl>
<p>您可以通过在前面添加感叹号来标记 “main” 索引条目。生成的索引中强调了对 “main” 条目的引用。例如，如果两个页面包含</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">index</span><span class="p">::</span> Python
</pre></div>
</div>
<p>和一页包含</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">index</span><span class="p">::</span> ! Python
</pre></div>
</div>
<p>然后在三个反向链接中强调后一页面的反向链接。</p>
<p>对于仅包含 “single” 条目的索引指令，有一种简写符号</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">index</span><span class="p">::</span> BNF, grammar, syntax, notation
</pre></div>
</div>
<p>这将创建四个索引条目。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.1 版更改: </span>添加了 <code class="docutils literal notranslate"><span class="pre">see</span></code> 和 <code class="docutils literal notranslate"><span class="pre">seealso</span></code> 类型，以及标记主条目。</p>
</div>
<p class="rubric">选项</p>
<dl class="rst directive:option">
<dt class="sig sig-object rst" id="directive-option-index-name">
<span id="directive:option-index-name"></span><span class="sig-name descname"><span class="pre">:name:</span></span><em class="property"> <span class="pre">a</span> <span class="pre">label</span> <span class="pre">for</span> <span class="pre">hyperlink</span></em><em class="property"> <span class="pre">(text)</span></em><a class="headerlink" href="#directive-option-index-name" title="永久链接至目标">¶</a></dt>
<dd><p>定义隐含的目标名称，可以通过使用 <a class="reference internal" href="roles.html#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a> 进行引用。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">index</span><span class="p">::</span> Python
   <span class="nc">:name:</span> py-index
</pre></div>
</div>
</dd></dl>

<div class="versionadded">
<p><span class="versionmodified added">3.0 新版功能.</span></p>
</div>
</dd></dl>

<dl class="rst role">
<dt class="sig sig-object rst" id="role-index">
<span class="sig-name descname"><span class="pre">:index:</span></span><a class="headerlink" href="#role-index" title="永久链接至目标">¶</a></dt>
<dd><p>虽然 <a class="reference internal" href="#directive-index" title="index directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">index</span></code></a> 指令是一个块级标记，并链接到下一段的开头，但也有一个相应的角色，直接在使用它的地方设置链接 target。</p>
<p>角色的内容可以是一个简单的短语，然后保留在文本中并作为索引条目使用。它也可以是文本和 index 条目的组合，风格像有明确的交叉引用的目标。 在这种情况下，“target” 部分可以是一个完整的条目，就像上面描述的上面的指令。例如</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>This is a normal reST <span class="na">:index:</span><span class="nv">`paragraph`</span> that contains several
<span class="na">:index:</span><span class="nv">`index entries &lt;pair: index; entry&gt;`</span>.
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">1.1 新版功能.</span></p>
</div>
</dd></dl>

</section>
<section id="including-content-based-on-tags">
<span id="tags"></span><h2>包含基于标记的内容<a class="headerlink" href="#including-content-based-on-tags" title="永久链接至标题">¶</a></h2>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-only">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">only::</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;expression&gt;</span></span><a class="headerlink" href="#directive-only" title="永久链接至目标">¶</a></dt>
<dd><p>只有当 <em>表达式</em> 为真时，才包括指令的内容。 表达式应该由标记组成，像这样</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">only</span><span class="p">::</span> html and draft
</pre></div>
</div>
<p>未定义的标记是 false，定义的标记（通过 <code class="docutils literal notranslate"><span class="pre">-t</span></code> 命令行选项或在 <code class="file docutils literal notranslate"><span class="pre">conf.py</span></code> 内，见 <a class="reference internal" href="../configuration.html#conf-tags"><span class="std std-ref">这里</span></a> ）是真的。支持布尔表达式，也使用圆括号（如 <code class="docutils literal notranslate"><span class="pre">html</span> <span class="pre">和（latex</span> <span class="pre">或</span> <span class="pre">draft）</span></code>）。</p>
<p>当前构建器的 <em>format</em> 和 <em>name</em> （<code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">latex</span></code> 或 <code class="docutils literal notranslate"><span class="pre">text</span></code>）总是被设置为标记 <a class="footnote-reference brackets" href="#id9" id="id5">4</a>。为了明确区分格式和名称，它们还被添加了前缀 <code class="docutils literal notranslate"><span class="pre">format_</span></code> 和 <code class="docutils literal notranslate"><span class="pre">builder_</span></code>，例如，epub 构建器定义了标记 <code class="docutils literal notranslate"><span class="pre">html</span></code>、 <code class="docutils literal notranslate"><span class="pre">epub</span></code>、 <code class="docutils literal notranslate"><span class="pre">format_html</span></code> 和 <code class="docutils literal notranslate"><span class="pre">builder_epub</span></code>。</p>
<p>这些标准标记是在读取配置文件之后设置的，所以它们在那里是不可用的。</p>
<p>所有的标记必须遵循标准的 Python 标识符语法，如 <a class="reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#identifiers">标识符和关键字</a> 文档中规定的。也就是说，一个标记表达式只能由符合 Python 变量语法的标记组成。在 ASCII 中，这包括大写和小写字母 <code class="docutils literal notranslate"><span class="pre">A</span></code> 到 <code class="docutils literal notranslate"><span class="pre">Z</span></code>，下划线 <code class="docutils literal notranslate"><span class="pre">_</span></code>，以及除第一个字符外的数字 <code class="docutils literal notranslate"><span class="pre">0</span></code> 到 <code class="docutils literal notranslate"><span class="pre">9</span></code>。</p>
<div class="versionadded">
<p><span class="versionmodified added">0.6 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.2 版更改: </span>添加了构建器的名字和前缀。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>该指令旨在仅控制文件的内容。它不能控制章节、标签等。</p>
</div>
</dd></dl>

</section>
<section id="tables">
<span id="table-directives"></span><h2>表格<a class="headerlink" href="#tables" title="永久链接至标题">¶</a></h2>
<p>使用 <a class="reference internal" href="basics.html#rst-tables"><span class="std std-ref">reStructuredText tables</span></a>，即要么是</p>
<ul class="simple">
<li><p>grid 表语法（<a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#grid-tables">ref</a>），</p></li>
<li><p>简单表的语法（<a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#simple-tables">ref</a>），</p></li>
<li><p><a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#csv-table">csv-table</a> 语法</p></li>
<li><p>或者 <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#list-table">list-table</a> 语法</p></li>
</ul>
<p><a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#table">table</a> 指令作为 <em>grid</em> 和 <em>simple</em> 语法的可选包装。</p>
<p>它们在 HTML 输出中运行良好，然而在 LaTeX 中使用表格时有一些麻烦：列宽很难自动正确确定。由于这个原因，存在以下指令：</p>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-tabularcolumns">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">tabularcolumns::</span></span><span class="sig-prename descclassname"> <span class="pre">column</span> <span class="pre">spec</span></span><a class="headerlink" href="#directive-tabularcolumns" title="永久链接至目标">¶</a></dt>
<dd><p>这个指令为源文件中出现的下一个表提供了一个 “column spec”。spec 是 LaTeX <code class="docutils literal notranslate"><span class="pre">tabulary</span></code> 包环境的第二个参数（Sphinx 用它来翻译表格）。它的值可以是:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>|l|l|l|
</pre></div>
</div>
<p>which means three left-adjusted, nonbreaking columns.  For columns with
longer text that should automatically be broken, use either the standard
<code class="docutils literal notranslate"><span class="pre">p{width}</span></code> construct, or tabulary’s automatic specifiers:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">L</span></code></p></td>
<td><p>flush left column with automatic width</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">R</span></code></p></td>
<td><p>flush right column with automatic width</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p>centered column with automatic width</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">J</span></code></p></td>
<td><p>justified column with automatic width</p></td>
</tr>
</tbody>
</table>
<p>The automatic widths of the <code class="docutils literal notranslate"><span class="pre">LRCJ</span></code> columns are attributed by <code class="docutils literal notranslate"><span class="pre">tabulary</span></code>
in proportion to the observed shares in a first pass where the table cells
are rendered at their natural “horizontal” widths.</p>
<p>By default, Sphinx uses a table layout with <code class="docutils literal notranslate"><span class="pre">J</span></code> for every column.</p>
<div class="versionadded">
<p><span class="versionmodified added">0.3 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.6 版更改: </span>Merged cells may now contain multiple paragraphs and are much better
handled, thanks to custom Sphinx LaTeX macros. This novel situation
motivated the switch to <code class="docutils literal notranslate"><span class="pre">J</span></code> specifier and not <code class="docutils literal notranslate"><span class="pre">L</span></code> by default.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">提示</p>
<p>Sphinx actually uses <code class="docutils literal notranslate"><span class="pre">T</span></code> specifier having done <code class="docutils literal notranslate"><span class="pre">\newcolumntype{T}{J}</span></code>.
To revert to previous default, insert <code class="docutils literal notranslate"><span class="pre">\newcolumntype{T}{L}</span></code> in the
LaTeX preamble (see <a class="reference internal" href="../configuration.html#confval-latex_elements"><code class="xref std std-confval docutils literal notranslate"><span class="pre">latex_elements</span></code></a>).</p>
<p>A frequent issue with tabulary is that columns with little contents are
“squeezed”. The minimal column width is a tabulary parameter called
<code class="docutils literal notranslate"><span class="pre">\tymin</span></code>. You may set it globally in the LaTeX preamble via
<code class="docutils literal notranslate"><span class="pre">\setlength{\tymin}{40pt}</span></code> for example.</p>
<p>Else, use the <a class="reference internal" href="#directive-tabularcolumns" title="tabularcolumns directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">tabularcolumns</span></code></a> directive with an explicit
<code class="docutils literal notranslate"><span class="pre">p{40pt}</span></code> (for example) for that column. You may use also <code class="docutils literal notranslate"><span class="pre">l</span></code>
specifier but this makes the task of setting column widths more difficult
if some merged cell intersects that column.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Tables with more than 30 rows are rendered using <code class="docutils literal notranslate"><span class="pre">longtable</span></code>, not
<code class="docutils literal notranslate"><span class="pre">tabulary</span></code>, in order to allow pagebreaks. The <code class="docutils literal notranslate"><span class="pre">L</span></code>, <code class="docutils literal notranslate"><span class="pre">R</span></code>, …
specifiers do not work for these tables.</p>
<p>Tables that contain list-like elements such as object descriptions,
blockquotes or any kind of lists cannot be set out of the box with
<code class="docutils literal notranslate"><span class="pre">tabulary</span></code>. They are therefore set with the standard LaTeX <code class="docutils literal notranslate"><span class="pre">tabular</span></code>
(or <code class="docutils literal notranslate"><span class="pre">longtable</span></code>) environment if you don’t give a <code class="docutils literal notranslate"><span class="pre">tabularcolumns</span></code>
directive.  If you do, the table will be set with <code class="docutils literal notranslate"><span class="pre">tabulary</span></code> but you
must use the <code class="docutils literal notranslate"><span class="pre">p{width}</span></code> construct (or Sphinx’s <code class="docutils literal notranslate"><span class="pre">\X</span></code> and <code class="docutils literal notranslate"><span class="pre">\Y</span></code>
specifiers described below) for the columns containing these elements.</p>
<p>Literal blocks do not work with <code class="docutils literal notranslate"><span class="pre">tabulary</span></code> at all, so tables containing
a literal block are always set with <code class="docutils literal notranslate"><span class="pre">tabular</span></code>. The verbatim environment
used for literal blocks only works in <code class="docutils literal notranslate"><span class="pre">p{width}</span></code> (and <code class="docutils literal notranslate"><span class="pre">\X</span></code> or <code class="docutils literal notranslate"><span class="pre">\Y</span></code>)
columns, hence Sphinx generates such column specs for tables containing
literal blocks.</p>
</div>
<p>Since Sphinx 1.5, the <code class="docutils literal notranslate"><span class="pre">\X{a}{b}</span></code> specifier is used (there <em>is</em> a backslash
in the specifier letter). It is like <code class="docutils literal notranslate"><span class="pre">p{width}</span></code> with the width set to a
fraction <code class="docutils literal notranslate"><span class="pre">a/b</span></code> of the current line width. You can use it in the
<a class="reference internal" href="#directive-tabularcolumns" title="tabularcolumns directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">tabularcolumns</span></code></a> (it is not a problem if some LaTeX macro is also
called <code class="docutils literal notranslate"><span class="pre">\X</span></code>.)</p>
<p>It is <em>not</em> needed for <code class="docutils literal notranslate"><span class="pre">b</span></code> to be the total number of columns, nor for the
sum of the fractions of the <code class="docutils literal notranslate"><span class="pre">\X</span></code> specifiers to add  up to one. For example
<code class="docutils literal notranslate"><span class="pre">|\X{2}{5}|\X{1}{5}|\X{1}{5}|</span></code> is legitimate and the table will occupy
80% of the line width, the first of its three columns having the same width
as the sum  of the next two.</p>
<p>This is used by the <code class="docutils literal notranslate"><span class="pre">:widths:</span></code> option of the <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#table">table</a> directive.</p>
<p>Since Sphinx 1.6, there is also the <code class="docutils literal notranslate"><span class="pre">\Y{f}</span></code> specifier which admits a
decimal argument, such has <code class="docutils literal notranslate"><span class="pre">\Y{0.15}</span></code>: this would have the same effect as
<code class="docutils literal notranslate"><span class="pre">\X{3}{20}</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.6 版更改: </span>Merged cells from complex grid tables (either multi-row, multi-column, or
both) now allow blockquotes, lists, literal blocks, … as do regular
cells.</p>
<p>Sphinx’s merged cells interact well with <code class="docutils literal notranslate"><span class="pre">p{width}</span></code>, <code class="docutils literal notranslate"><span class="pre">\X{a}{b}</span></code>,
<code class="docutils literal notranslate"><span class="pre">\Y{f}</span></code> and tabulary’s columns.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p><a class="reference internal" href="#directive-tabularcolumns" title="tabularcolumns directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">tabularcolumns</span></code></a> conflicts with <code class="docutils literal notranslate"><span class="pre">:widths:</span></code> option of table
directives.  If both are specified, <code class="docutils literal notranslate"><span class="pre">:widths:</span></code> option will be ignored.</p>
</div>
</dd></dl>

</section>
<section id="math">
<h2>Math<a class="headerlink" href="#math" title="永久链接至标题">¶</a></h2>
<p>The input language for mathematics is LaTeX markup.  This is the de-facto
standard for plain-text math notation and has the added advantage that no
further translation is necessary when building LaTeX output.</p>
<p>Keep in mind that when you put math markup in <strong>Python docstrings</strong> read by
<a class="reference internal" href="../extensions/autodoc.html#module-sphinx.ext.autodoc" title="sphinx.ext.autodoc: Include documentation from docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">autodoc</span></code></a>, you either have to double all backslashes,
or use Python raw strings (<code class="docutils literal notranslate"><span class="pre">r&quot;raw&quot;</span></code>).</p>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-math">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">math::</span></span><a class="headerlink" href="#directive-math" title="永久链接至目标">¶</a></dt>
<dd><p>Directive for displayed math (math that takes the whole line for itself).</p>
<p>The directive supports multiple equations, which should be separated by a
blank line:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">math</span><span class="p">::</span>

   (a + b)^2 = a^2 + 2ab + b^2

   (a - b)^2 = a^2 - 2ab + b^2
</pre></div>
</div>
<p>In addition, each single equation is set within a <code class="docutils literal notranslate"><span class="pre">split</span></code> environment,
which means that you can have multiple aligned lines in an equation,
aligned at <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> and separated by <code class="docutils literal notranslate"><span class="pre">\\</span></code>:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">math</span><span class="p">::</span>

   (a + b)^2  &amp;=  (a + b)(a + b) \\
              &amp;=  a^2 + 2ab + b^2
</pre></div>
</div>
<p>For more details, look into the documentation of the <a class="reference external" href="https://www.ams.org/publications/authors/tex/amslatex">AmSMath LaTeX
package</a>.</p>
<p>When the math is only one line of text, it can also be given as a directive
argument:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">math</span><span class="p">::</span> (a + b)^2 = a^2 + 2ab + b^2
</pre></div>
</div>
<p>Normally, equations are not numbered.  If you want your equation to get a
number, use the <code class="docutils literal notranslate"><span class="pre">label</span></code> option.  When given, it selects an internal label
for the equation, by which it can be cross-referenced, and causes an equation
number to be issued.  See <a class="reference internal" href="roles.html#role-eq" title="eq role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">eq</span></code></a> for an example.  The numbering
style depends on the output format.</p>
<p>There is also an option <code class="docutils literal notranslate"><span class="pre">nowrap</span></code> that prevents any wrapping of the given
math in a math environment.  When you give this option, you must make sure
yourself that the math is properly set up.  For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">math</span><span class="p">::</span>
   <span class="nc">:nowrap:</span>

   \begin{eqnarray}
      y    &amp; = &amp; ax^2 + bx + c \\
      f(x) &amp; = &amp; x^2 + 2xy + y^2
   \end{eqnarray}
</pre></div>
</div>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参见</p>
<dl class="simple">
<dt><a class="reference internal" href="../extensions/math.html#math-support"><span class="std std-ref">Math support for HTML outputs in Sphinx</span></a></dt><dd><p>Rendering options for math with HTML builders.</p>
</dd>
<dt><a class="reference internal" href="../configuration.html#confval-latex_engine"><code class="xref std std-confval docutils literal notranslate"><span class="pre">latex_engine</span></code></a></dt><dd><p>Explains how to configure LaTeX builder to support Unicode literals in
math mark-up.</p>
</dd>
</dl>
</div>
</section>
<section id="grammar-production-displays">
<h2>Grammar production displays<a class="headerlink" href="#grammar-production-displays" title="永久链接至标题">¶</a></h2>
<p>Special markup is available for displaying the productions of a formal grammar.
The markup is simple and does not attempt to model all aspects of BNF (or any
derived forms), but provides enough to allow context-free grammars to be
displayed in a way that causes uses of a symbol to be rendered as hyperlinks to
the definition of the symbol.  There is this directive:</p>
<dl class="rst directive">
<dt class="sig sig-object rst" id="directive-productionlist">
<span class="sig-name descname"><span class="pre">..</span> <span class="pre">productionlist::</span></span><span class="sig-prename descclassname"> <span class="pre">[productionGroup]</span></span><a class="headerlink" href="#directive-productionlist" title="永久链接至目标">¶</a></dt>
<dd><p>This directive is used to enclose a group of productions.  Each production
is given on a single line and consists of a name, separated by a colon from
the following definition.  If the definition spans multiple lines, each
continuation line must begin with a colon placed at the same column as in
the first line.
Blank lines are not allowed within <code class="docutils literal notranslate"><span class="pre">productionlist</span></code> directive arguments.</p>
<p>The definition can contain token names which are marked as interpreted text
(e.g., “<code class="docutils literal notranslate"><span class="pre">sum</span> <span class="pre">::=</span> <span class="pre">`integer`</span> <span class="pre">&quot;+&quot;</span> <span class="pre">`integer`</span></code>”) – this generates
cross-references to the productions of these tokens.  Outside of the
production list, you can reference to token productions using
<a class="reference internal" href="roles.html#role-token" title="token role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">token</span></code></a>.</p>
<p>The <em>productionGroup</em> argument to <a class="reference internal" href="#directive-productionlist" title="productionlist directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">productionlist</span></code></a> serves to
distinguish different sets of production lists that belong to different
grammars.  Multiple production lists with the same <em>productionGroup</em> thus
define rules in the same scope.</p>
<p>Inside of the production list, tokens implicitly refer to productions
from the current group. You can refer to the production of another
grammar by prefixing the token with its group name and a colon, e.g,
“<code class="docutils literal notranslate"><span class="pre">otherGroup:sum</span></code>”. If the group of the token should not be shown in
the production, it can be prefixed by a tilde, e.g.,
“<code class="docutils literal notranslate"><span class="pre">~otherGroup:sum</span></code>”. To refer to a production from an unnamed
grammar, the token should be prefixed by a colon, e.g., “<code class="docutils literal notranslate"><span class="pre">:sum</span></code>”.</p>
<p>Outside of the production list,
if you have given a <em>productionGroup</em> argument you must prefix the
token name in the cross-reference with the group name and a colon,
e.g., “<code class="docutils literal notranslate"><span class="pre">myGroup:sum</span></code>” instead of just “<code class="docutils literal notranslate"><span class="pre">sum</span></code>”.
If the group should not be shown in the title of the link either
an explicit title can be given (e.g., “<code class="docutils literal notranslate"><span class="pre">myTitle</span> <span class="pre">&lt;myGroup:sum&gt;</span></code>”),
or the target can be prefixed with a tilde (e.g., “<code class="docutils literal notranslate"><span class="pre">~myGroup:sum</span></code>”).</p>
<p>Note that no further reST parsing is done in the production, so that you
don’t have to escape <code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">|</span></code> characters.</p>
</dd></dl>

<p>The following is an example taken from the Python Reference Manual:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">productionlist</span><span class="p">::</span>
   try_stmt: try1_stmt | try2_stmt
   try1_stmt: &quot;try&quot; &quot;:&quot; <span class="nv">`suite`</span>
            : (&quot;except&quot; [<span class="nv">`expression`</span> [&quot;,&quot; <span class="nv">`target`</span>]] &quot;:&quot; <span class="nv">`suite`</span>)+
            : [&quot;else&quot; &quot;:&quot; <span class="nv">`suite`</span>]
            : [&quot;finally&quot; &quot;:&quot; <span class="nv">`suite`</span>]
   try2_stmt: &quot;try&quot; &quot;:&quot; <span class="nv">`suite`</span>
            : &quot;finally&quot; &quot;:&quot; <span class="nv">`suite`</span>
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>The LaTeX writer only refers the <code class="docutils literal notranslate"><span class="pre">maxdepth</span></code> option of first toctree
directive in the document.</p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>A note on available globbing syntax: you can use the standard shell
constructs <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">?</span></code>, <code class="docutils literal notranslate"><span class="pre">[...]</span></code> and <code class="docutils literal notranslate"><span class="pre">[!...]</span></code> with the feature that
these all don’t match slashes.  A double star <code class="docutils literal notranslate"><span class="pre">**</span></code> can be used to
match any sequence of characters <em>including</em> slashes.</p>
</dd>
<dt class="label" id="id8"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>There is a standard <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">include</span></code> directive, but it raises errors if the
file is not found.  This one only emits a warning.</p>
</dd>
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id5">4</a></span></dt>
<dd><p>For most builders name and format are the same. At the moment only
builders derived from the html builder distinguish between the builder
format and the builder name.</p>
<p>Note that the current builder tag is not available in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>, it is
only available after the builder is initialized.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="field-lists.html" title="字段列表"
             >下一页</a> |</li>
        <li class="right" >
          <a href="roles.html" title="角色"
             >上一页</a> |</li>
        <li><a href="../../index.html">Sphinx home</a>&#160;|</li>
        <li><a href="../../contents.html">Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >使用 Sphinx</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >reStructuredText</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">指令</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2007-2021, Georg Brandl and the Sphinx team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>